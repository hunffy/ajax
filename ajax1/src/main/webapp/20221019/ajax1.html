<!DOCTYPE html>
<!-- /ajax1/src/main/webapp/20221019/ajax1.html -->
<html>
<head>
<meta charset="UTF-8">
<title>XMLHttpRequest 객체</title>
<script type="text/javascript">
	function loadJsp() {

		/*
			new XMLHttpRequest() : ajax객체 서버에 요청 후, 응답을 받을 수 있는 기능을 가진 객체
		*/
		const xhttp = new XMLHttpRequest() //ajax객체 (0번상태)
			
		//xhttp는 ajax객체 
		//  "GET" 	: 서버와 요청하는방식 GET방식으로 설정
		//test.jsp 	: 요청페이지
		xhttp.open("GET", "test1.jsp") //서버와 요청하는방식 설정   (1번상태)
		xhttp.send()	//서버에 요청하는코드		(2번상태:요청한상태)
		
		/*onreadystatechange : 콜백함수 등록 변수 , ajax객체가 변경될때마다 함수를 실행시킴
			readyState
				0 : 객체 생성
				1 : open() 실행
				2 : send() 실행
				3 : 서버로부터 응답의 일부만 수신. 응답중
				4 : 서버로부터 응답완료
			status : Http 응답코드 (정상,오류 판별)
			200 : 정상응답
			404 : 해당 페이지 없음
			500 : 해당 페이지 있지만 오류
		*/
		xhttp.onreadystatechange=function(){
				//서버 응답이 정상적으로 완료된 경우
			if(this.readyState==4 && this.status==200) {
				//responseText : 서버의 응답 메세지
				//this = xhttp객체
				alert(this.responseText) // responseText:서버응답데이터
				document.getElementById("demo").innerHTML=this.responseText //서버응답데이터를 demo에 대입
			}
		}
	}
</script></head><body>
<h2>XMLHttpRequest 객체</h2>
<button type="button" onclick="loadJsp()">요청</button>
<div id="demo"></div>
</body>
</html>