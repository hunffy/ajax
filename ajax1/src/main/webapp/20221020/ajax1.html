<!DOCTYPE html>
<!-- /ajax1/src/main/webapp/20221020/ajax1.html -->
<html>
<head>
<meta charset="UTF-8">
<title>The XMLHttpRequest Object</title>
<script>

//GET 방식 : url?(+)param 정보 
//ex) http://localhost:8088/jsp3/list?boardid=1
	function loadJspGet() {
		const xhttp = new XMLHttpRequest(); //ajax객체 생성
		const params = "?name=" + document.f.name.value
		xhttp.open("GET", "test1.jsp" + params)//GET방식은 url에 파라미터값이 붙음.
		xhttp.send()
		
		//callBack : 함수이름
		//콜백함수 : callBack()로 설정
		//xhttp가 변경될때마다 callBack 함수를 호출해.
		xhttp.onreadystatechange = callBack
	}
	//POST방식 : url은 따로있고
	//			param : http 프로토콜의 body부분에 추가
	function loadJspPost() {
		const xhttp = new XMLHttpRequest();
		const params = "name=" + document.f.name.value
		xhttp.open("POST", "test1.jsp")
		
		//POST 방식에서 요청 header 부분 설정
		xhttp.setRequestHeader('Content-Type',
				'application/x-www-form-urlencoded;charset=UTF-8');
		xhttp.send(params)	//POST 방식에서 파라미터 전송
		xhttp.onreadystatechange = callBack
	}
	function callBack() {
		if (this.readyState == 4 && this.status == 200) {
			alert(this.responseText)
			document.getElementById("demo").innerHTML
			= this.responseText
		}
	}
</script></head><body>
	<h2>XMLHttpRequest 객체</h2>
	<form name="f"><input type="text" name="name"></form>
	<button type="button" onclick="loadJspGet()">입력(get)</button>
	<button type="button" onclick="loadJspPost()">입력(post)</button>
	<div id="demo"></div>
</body>
</html>